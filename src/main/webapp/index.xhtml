<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
	<title>Samba Test Upload e Visualização</title>
</h:head>

<h:body>
	<h:form id="mainForm">
		<p:poll id="idPoll" interval="1"
			listener="#{uploadBean.checkForConverted}" widgetVar="poll"
			process="@this" />

		<p:growl id="growl" life="4000" />
		
		<!-- Upload panel -->
		<p:panel id="panelUpload" header="Upload do arquivo de vídeo"
			style="width: 90%; margin-left: auto; margin-right: auto;">
			<p:panelGrid columns="2" styleClass="ui-panelgrid-blank"
				style="width: 100%">
				<p:outputLabel value="Selecione o arquivo" />
				<p:fileUpload fileUploadListener="#{uploadBean.handleFileUpload}"
					mode="advanced" auto="true" skinSimple="true" label="Escolher"/>

				<h:button id="btnRedirect" value="Ver vídeo" outcome="watch.xhtml"
					rendered="#{uploadBean.buttonVisible}" />
			</p:panelGrid>
		</p:panel>

		<!--  Modal dialog -->
		<p:dialog id="_dlg1" widgetVar="dlg1" modal="true" draggable="false"
			closable="false" resizable="false" showHeader="false">
			<p:outputLabel>Convertendo arquivo, por favor aguarde</p:outputLabel>
		</p:dialog>

	</h:form>
</h:body>
</html>